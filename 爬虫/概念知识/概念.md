### 1.什么是协程？

协程其实可以认为是比线程更小的执行单元，协程 是为非抢占式多任务产生子程序的计算机程序组件，协程允许不同入口点在不同位置暂停或开始执行程序，可以中断函数执行，转而执行别的函数。





### 2.协程有哪些优点？

协程的执行效率非常高。因为子程序切换不是线程切换，而是由程序自身控制。因此，没有线程切换的开销，和多线程相比，线程数量越多，相同数量的协程体现出的优势越明显



### 3.同步和异步的区别是什么？

同步：是所有的操作都做完，才返回给用户结果，用户体验不好。。

异步：不用等所有操作等做完，就响应用户请求。即先响应用户请求，然后慢慢去写数据库，用户体验较好





### 4.什么是守护线程？

设置一个线程是守护线程，就说明这不是一个很重要的线程，对于这样的线程，只要主线程运行结束，就会直接退出

而如果一个线程不是守护线程的话，即使主线程运行结束也不会退出，而是等待所有的非守护线程运行结束，再退出



### 5.线程锁有什么用？

当多个线程同时进行任务时，为保证不会有多个线程对同一个数据进行操作造成不可预料的后果，加个锁，将此时的线程变为单线程进行操作。

threading_Lock()

四个状态：

​	1.获取锁、上锁：acquire()

​	2.等待：wait()

​	3.解锁：release()

​	4.唤醒、唤醒全部：notify()、notify_all()

注：当多个线程同时执行lock.acquire时，只有一个线程能成功地获取锁，然后继续执行代码，其他线程就继续等待直到获得锁为止。获得锁的线程用完后一定要释放锁，否则那些苦苦等待锁的线程将永远等待下去，成为死线程。

###### 好处：确保了某一段断码只能有一个线程从头到尾完整的执行

坏处：首先是阻止了多线程的多发执行，包含锁的某段代码实际上只能以单线程模式执行，效率就大大的降低。其次由于可以存在多个锁，不同线程存在不同的锁，并试图获取对方持有的锁时，可能会造成锁死，导致多个线程全部挂起，既不能执行也不能结束，只能靠操作系统强制终止。

### 6.什么是python线程GIL

一个防止多线程并发执行机器码的一个Mutex

GIL的存在导致多线程无法很好的立即多核CPU的并发处理能力

Python的多线程在多核CPU上，只对于IO密集型计算产生正面效果；而当有至少有一个CPU密集型线程存在，那么多线程效率会由于GIL而大幅下降。



### 7.多线程和多进程有什么区别？什么情况下使用多线程，什么情况下使用多进程？

多进程就是利用CPU的多核优势，在同一时间并行的执行多个任务，可以大大提高执行效率。

区别：

1.多进程开销大，多线程开销小

2.进程是资源分配的最小单位，线程是CPU调度的最小单位



| 对比维度       | 多进程                                                       | 多线程                                                       | 总结     |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | -------- |
| 数据共享、同步 | 数据共性复杂，需要IPC；数据是分开的，同步简单                | 因为共享进程数据，数据共享简单，但也因为这个原因导致同步复杂； | 各有优势 |
| 内存、CPU      | 占用内存多，切换复杂，CPU利用率低                            | 占用内存少，切换简单，CPU利用率高                            | 线程优势 |
| 创建销毁、切换 | 创建销毁、切换复杂，速度慢                                   | 创建销毁、切换简单，速度很快                                 | 线程优势 |
| 编程、调试     | 编程简单、调试简单                                           | 编程、调试复杂                                               | 进程优势 |
| 可靠性         | 进程间不会相互影响                                           | 一个线程挂掉将导致整个进程挂掉                               | 进程优势 |
| 分布式         | 适用于多核、多机分布式；如果一台机器不够，扩展到多台机器比较简单 | 适用于多核分布式                                             | 进程优势 |



### 8.阻塞和非阻塞

阻塞状态指程序未得到所需计算资源时被挂起的状态。程序在等待某个操作完成期间，自身不能继续干别的事，则称该程序在该操作上是阻塞的。

常见的阻塞形式有：网络I/O阻塞、磁盘I/O阻塞、用户输入阻塞等；



程序在等待某操作过程中，自身不被阻塞，可以继续运行其他事情，则称该程序操作上是非阻塞的



### 9. asyncio库

1.event_loop:事件循环

2.coroutine:协程，我们可以将协程对象注册到时间循环中，它会被事件循环调用。

我们可以使用 async 关键字来定义一个方法，这个方法在调用时不会立即被执行，而是返回一个协程（coroutine）对象，必须讲其注册到事件循环中才可以执行。

3.task :任务它是对协程对象的进一步封装，包含了任务的各个状态。

4.future：代表将来执行或没有执行的任务的结果，实际上和 task 没有本质区别



### 10.await方法

await后面的对象必须是如下格式之一：

1.原生coroutine对象

2.一个由type.coroutine()修饰的生成器，这个生成器可以返回coroutine对象

3.一个包含__await方法的对象返回的一个迭代器。

